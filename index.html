<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1a1a1a">
    <meta name="background-color" content="#1a1a1a">
    <meta name="msapplication-TileColor" content="#004e89">
    <meta name="msapplication-TileImage" content="icons/icon-144x144.png">
    <meta name="msapplication-config" content="browserconfig.xml">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Posemetre Pro">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-192x192.png">
    
    <!-- SEO & Description -->
    <meta name="description" content="Assistant professionnel de posemetre et flashmetre pour photographes. Calcul d'exposition, mode flash HSS, ratios d'eclairage.">
    <meta name="keywords" content="posemetre, flashmetre, photographie, exposition, ISO, ouverture, vitesse, flash, HSS, light meter">
    <meta name="author" content="Laurent Suchet">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Assistant Posemetre Pro">
    <meta property="og:description" content="Assistant professionnel de posemetre et flashmetre pour photographes">
    <meta property="og:image" content="icons/icon-512x512.png">
    <meta property="og:locale" content="fr_FR">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Assistant Posemetre Pro">
    <meta name="twitter:description" content="Assistant professionnel de posemetre et flashmetre pour photographes">
    <meta name="twitter:image" content="icons/icon-512x512.png">
    
    <title>Assistant Posemetre Pro</title>
    
    <!-- Manifest & Icons -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="shortcut icon" href="favicon-32x32.png">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header>
            <div class="header-content">
                <h1 data-i18n="appTitle">&#128247; Assistant Posemètre Pro</h1>
                <div class="header-buttons">
                    <button id="lang-btn" class="header-btn" title="Switch to English">EN</button>
                    <button id="help-btn" class="header-btn" title="Aide">?</button>
                    <button id="theme-toggle" class="header-btn" title="Changer de thème"></button>
                </div>
            </div>
            <div class="power-mode-switch" id="powerModeSwitch" style="display: none;">
                <label class="switch-label">
                    <span class="mode-text">Puissance:</span>
                    <button id="powerModeToggle" class="toggle-btn">
                        <span class="toggle-option active">IL</span>
                        <span class="toggle-option">Fractions</span>
                    </button>
                </label>
            </div>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="posemetre" data-i18n="navPosemetre">&#9728;&#65039; Continu</button>
            <button class="tab-btn" data-tab="flashmetre" data-i18n="navFlash">&#9889; Flash</button>
            <button class="tab-btn" data-tab="ratios" data-i18n="navRatios">&#128161; Ratios</button>
            <button class="tab-btn" data-tab="estimation" data-i18n="navEstimation">&#127919; Sans Cellule</button>
        </nav>

        <main class="content">
            <!-- MODE POSEMETRE -->
            <section id="tab-posemetre" class="tab-content active">
                <div class="meter-display">
                    <h2 data-i18n="posemetreTitle">Mode Continu (Lumière ambiante)</h2>
                    
                    <div class="input-group">
                        <label data-i18n="labelMesureInitiale">Mesure initiale (Ouverture):</label>
                        <select id="pose-mesure" class="input-field">
                            <!-- Options generees par JS -->
                        </select>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label data-i18n="labelISO">ISO:</label>
                            <input type="number" id="pose-iso" class="input-field" value="100" min="50" max="102400" step="1">
                        </div>
                        <div class="input-group">
                            <label data-i18n="labelVitesse">Vitesse:</label>
                            <select id="pose-vitesse" class="input-field">
                                <!-- Options generees par JS -->
                            </select>
                        </div>
                    </div>

                    <div class="compensation-section">
                        <label data-i18n="labelCompensation">Compensation d'exposition:</label>
                        <div class="compensation-controls">
                            <button class="comp-btn" data-value="-2">-2 IL</button>
                            <button class="comp-btn" data-value="-1">-1 IL</button>
                            <button class="comp-btn" data-value="-0.33">-1/3 IL</button>
                            <button class="comp-btn active" data-value="0">0</button>
                            <button class="comp-btn" data-value="0.33">+1/3 IL</button>
                            <button class="comp-btn" data-value="1">+1 IL</button>
                            <button class="comp-btn" data-value="1.33">+1 1/3 IL</button>
                            <button class="comp-btn" data-value="2">+2 IL</button>
                            <button class="comp-btn" data-value="3">+3 IL</button>
                        </div>
                        <div class="compensation-display">
                            <span id="pose-comp-value">0 IL</span>
                        </div>
                    </div>

                    <div class="results-box">
                        <h3 data-i18n="resultsSuggeres">&#127919; Réglages suggérés</h3>
                        <div id="pose-results" class="results-content">
                            <!-- Resultats generes par JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- MODE FLASHMETRE -->
            <section id="tab-flashmetre" class="tab-content">
                <div class="meter-display">
                    <h2 data-i18n="flashTitle">Mode Flashmètre</h2>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label data-i18n="labelVitesseSync">Vitesse sync:</label>
                            <select id="flash-vitesse" class="input-field">
                                <!-- Options generees par JS -->
                            </select>
                        </div>
                        <div class="input-group">
                            <label data-i18n="labelISO">ISO:</label>
                            <input type="number" id="flash-iso" class="input-field" value="100" min="50" max="102400" step="1">
                        </div>
                    </div>

                    <!-- Section HSS -->
                    <div class="hss-section">
                        <div class="hss-toggle-row">
                            <label class="hss-label">
                                <input type="checkbox" id="hss-enabled" class="hss-checkbox">
                                <span class="hss-switch"></span>
                                <span data-i18n="labelHSSEnabled">Mode HSS (High-Speed Sync)</span>
                            </label>
                        </div>
                        <div class="hss-options" id="hss-options" style="display: none;">
                            <div class="input-group">
                                <label data-i18n="labelHSSSyncMax">Vitesse sync max du flash:</label>
                                <select id="hss-sync-max" class="input-field">
                                    <option value="0.005">1/200</option>
                                    <option value="0.004" selected>1/250</option>
                                    <option value="0.003125">1/320</option>
                                </select>
                            </div>
                            <div class="hss-warning" id="hss-warning" style="display: none;">
                                <span class="warning-icon">&#9888;</span>
                                <span id="hss-warning-text"></span>
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label data-i18n="labelMesureFlash">Mesure flash actuelle:</label>
                        <select id="flash-mesure" class="input-field">
                            <!-- Options generees par JS -->
                        </select>
                    </div>

                    <div class="input-group">
                        <label data-i18n="labelOuvertureSouhaitee">Ouverture souhaitée:</label>
                        <select id="flash-target" class="input-field">
                            <!-- Options generees par JS -->
                        </select>
                    </div>

                    <div class="input-group" id="flash-current-power-group" style="display: none;">
                        <label data-i18n="labelPuissanceActuelle">Puissance flash actuelle:</label>
                        <select id="flash-current-power" class="input-field">
                            <option value="1">1/1 (Pleine puissance)</option>
                            <option value="0.5" selected>1/2</option>
                            <option value="0.25">1/4</option>
                            <option value="0.125">1/8</option>
                            <option value="0.0625">1/16</option>
                            <option value="0.03125">1/32</option>
                            <option value="0.015625">1/64</option>
                            <option value="0.0078125">1/128</option>
                            <option value="0.00390625">1/256</option>
                            <option value="0.001953125">1/512</option>
                        </select>
                    </div>

                    <div class="compensation-section">
                        <label>Compensation supplementaire:</label>
                        <div class="compensation-controls">
                            <button class="comp-btn flash-comp" data-value="-2">-2 IL</button>
                            <button class="comp-btn flash-comp" data-value="-1">-1 IL</button>
                            <button class="comp-btn flash-comp" data-value="-0.33">-1/3 IL</button>
                            <button class="comp-btn flash-comp active" data-value="0">0</button>
                            <button class="comp-btn flash-comp" data-value="0.33">+1/3 IL</button>
                            <button class="comp-btn flash-comp" data-value="1">+1 IL</button>
                            <button class="comp-btn flash-comp" data-value="1.33">+1 1/3 IL</button>
                            <button class="comp-btn flash-comp" data-value="2">+2 IL</button>
                            <button class="comp-btn flash-comp" data-value="3">+3 IL</button>
                        </div>
                        <div class="compensation-display">
                            <span id="flash-comp-value">0 IL</span>
                        </div>
                    </div>

                    <div class="results-box">
                        <h3 data-i18n="resultsFlash">&#9889; Ajuster le flash à</h3>
                        <div id="flash-results" class="results-content">
                            <!-- Resultats generes par JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- MODE RATIOS KEY/FILL -->
            <section id="tab-ratios" class="tab-content">
                <div class="meter-display">
                    <h2 data-i18n="ratiosTitle">Ratios Key/Fill Light</h2>
                    
                    <div class="input-group">
                        <label data-i18n="labelKeyLight">Key Light (mesure):</label>
                        <select id="ratio-key" class="input-field">
                            <!-- Options generees par JS -->
                        </select>
                    </div>

                    <div class="compensation-section">
                        <label data-i18n="labelRatioFill">Ratio Fill vs Key:</label>
                        <div class="compensation-controls">
                            <button class="comp-btn ratio-comp" data-value="-3">-3 IL</button>
                            <button class="comp-btn ratio-comp" data-value="-2.5">-2.5 IL</button>
                            <button class="comp-btn ratio-comp active" data-value="-2">-2 IL</button>
                            <button class="comp-btn ratio-comp" data-value="-1.5">-1.5 IL</button>
                            <button class="comp-btn ratio-comp" data-value="-1">-1 IL</button>
                            <button class="comp-btn ratio-comp" data-value="-0.5">-0.5 IL</button>
                        </div>
                        <div class="compensation-display">
                            <span id="ratio-comp-value">-2 IL</span>
                        </div>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label data-i18n="labelISO">ISO:</label>
                            <input type="number" id="ratio-iso" class="input-field" value="100" min="50" max="102400" step="1">
                        </div>
                        <div class="input-group">
                            <label data-i18n="labelVitesse">Vitesse:</label>
                            <select id="ratio-vitesse" class="input-field">
                                <!-- Options generees par JS -->
                            </select>
                        </div>
                    </div>

                    <div class="results-box">
                        <h3 data-i18n="resultsFill">&#128161; Fill Light à régler</h3>
                        <div id="ratio-results" class="results-content">
                            <!-- Resultats generes par JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- MODE ESTIMATION -->
            <section id="tab-estimation" class="tab-content">
                <div class="meter-display">
                    <h2 data-i18n="estimationTitle">Sans Cellule (Estimation incidente)</h2>
                    <p class="info-text">Mesure spot sur une zone de référence</p>
                    
                    <div class="input-group">
                        <label data-i18n="labelZoneMesuree">Zone mesurée (spot):</label>
                        <select id="estim-zone" class="input-field">
                            <option value="4">⚠️ Blanc crame (+4 IL) - sans detail</option>
                            <option value="3">Blanc avec details / Nuages blancs (+3 IL)</option>
                            <option value="2">Peau tres claire / Mur blanc / Sable blanc (+2 IL)</option>
                            <option value="1.5">Ciel couvert lumineux / Neige ombre (+1.5 IL)</option>
                            <option value="1" selected>Peau claire / Sable clair / Ciel bleu clair (+1 IL)</option>
                            <option value="0.5">Peau moyenne claire / Ciel bleu moyen (+0.5 IL)</option>
                            <option value="0">Gris 18% / Herbe verte / Feuillage / Ciel bleu profond (0 IL)</option>
                            <option value="-0.5">Peau moyenne foncee / Ciel coucher soleil (-0.5 IL)</option>
                            <option value="-1">Peau foncee / Feuillage ombre / Ciel orageux (-1 IL)</option>
                            <option value="-2">Pierre sombre / Asphalte sec / Terre sombre (-2 IL)</option>
                            <option value="-3">Noir avec details / Ombres profondes (-3 IL)</option>
                            <option value="-4">⚠️ Noir bouche (-4 IL) - sans detail</option>
                        </select>
                    </div>

                    <div class="input-row">
                        <div class="input-group">
                            <label data-i18n="labelLectureAppareil">Lecture appareil (f/):</label>
                            <select id="estim-mesure" class="input-field">
                                <!-- Options generees par JS -->
                            </select>
                        </div>
                        <div class="input-group">
                            <label data-i18n="labelISO">ISO:</label>
                            <input type="number" id="estim-iso" class="input-field" value="100" min="50" max="102400" step="1">
                        </div>
                    </div>

                    <div class="input-group">
                        <label data-i18n="labelVitesse">Vitesse:</label>
                        <select id="estim-vitesse" class="input-field">
                            <!-- Options generees par JS -->
                        </select>
                    </div>

                    <div class="compensation-section">
                        <label data-i18n="labelCompensation">Compensation d'exposition:</label>
                        <div class="compensation-controls">
                            <button class="comp-btn estim-comp" data-value="-2">-2 IL</button>
                            <button class="comp-btn estim-comp" data-value="-1">-1 IL</button>
                            <button class="comp-btn estim-comp" data-value="-0.33">-1/3 IL</button>
                            <button class="comp-btn estim-comp active" data-value="0">0</button>
                            <button class="comp-btn estim-comp" data-value="0.33">+1/3 IL</button>
                            <button class="comp-btn estim-comp" data-value="1">+1 IL</button>
                            <button class="comp-btn estim-comp" data-value="1.33">+1 1/3 IL</button>
                            <button class="comp-btn estim-comp" data-value="2">+2 IL</button>
                            <button class="comp-btn estim-comp" data-value="3">+3 IL</button>
                        </div>
                        <div class="compensation-display">
                            <span id="estim-comp-value">0 IL</span>
                        </div>
                    </div>

                    <div class="results-box">
                        <h3 data-i18n="resultsEstimation">&#128202; Lumière incidente estimée</h3>
                        <div id="estim-results" class="results-content">
                            <!-- Resultats generes par JS -->
                        </div>
                    </div>

                    <div class="info-box">
                        <h4 data-i18n="gridTitle">&#128203; Grille de réflectance (Exemples concrets)</h4>
                        <div class="reflectance-grid">
                            <div><strong>⚠️ +4 IL:</strong> Blanc crame, reflets speculaires - <em>sans detail exploitable</em></div>
                            <div><strong>+3 IL:</strong> Blanc avec details, nuages blancs lumineux, neige plein soleil, ecorce de bouleau</div>
                            <div><strong>+2 IL:</strong> Peau tres claire, mur blanc a l'ombre, sable blanc, pierre calcaire</div>
                            <div><strong>+1.5 IL:</strong> Ciel couvert lumineux, neige a l'ombre, brouillard</div>
                            <div><strong>+1 IL:</strong> Peau claire caucasienne, sable clair, ciel bleu clair, palmier</div>
                            <div><strong>+0.5 IL:</strong> Peau moyenne claire, ciel bleu moyen, beton clair</div>
                            <div><strong>0 IL (Zone V):</strong> Gris 18% (carte grise), herbe verte, feuillage ensoleille, ciel bleu profond, jean delave</div>
                            <div><strong>-0.5 IL:</strong> Peau moyenne foncee, ciel au coucher du soleil (orange), tuiles</div>
                            <div><strong>-1 IL:</strong> Peau foncee, feuillage a l'ombre, ciel orageux, bois fonce</div>
                            <div><strong>-2 IL:</strong> Pierre sombre, asphalte sec, terre sombre, ecorce de chene</div>
                            <div><strong>-3 IL:</strong> Noir avec details, ombres profondes, vetement noir texture, cheveux noirs</div>
                            <div><strong>⚠️ -4 IL:</strong> Noir bouche, ombres tres denses - <em>sans detail exploitable</em></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <button id="installBtn" class="install-btn" style="display:none;">
                <span data-i18n="footerInstall">&#128241; Installer l'application</span>
            </button>
            <p class="footer-text" data-i18n="footerText">Assistant Posemètre Pro v1.2 | Développé pour Laurent Suchet IG:@ono_sendai</p>
        </footer>
    </div>

    <!-- Modal Aide -->
    <div id="help-modal" class="modal-overlay" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h2 data-i18n="helpTitle">&#128214; Aide</h2>
                <button id="help-close" class="modal-close">&times;</button>
            </div>
            
            <div class="modal-nav">
                <button class="modal-nav-btn active" data-section="general" data-i18n="helpNavGeneral">Général</button>
                <button class="modal-nav-btn" data-section="posemetre" data-i18n="helpNavPosemetre">Continu</button>
                <button class="modal-nav-btn" data-section="flash" data-i18n="helpNavFlash">Flash</button>
                <button class="modal-nav-btn" data-section="ratios" data-i18n="helpNavRatios">Ratios</button>
                <button class="modal-nav-btn" data-section="estimation" data-i18n="helpNavEstimation">Sans Cellule</button>
            </div>
            
            <div class="modal-content">
                <!-- Les contenus sont chargés dynamiquement par i18n.js -->
                <div class="help-section active" id="help-general"></div>
                <div class="help-section" id="help-posemetre"></div>
                <div class="help-section" id="help-flash"></div>
                <div class="help-section" id="help-ratios"></div>
                <div class="help-section" id="help-estimation"></div>
            </div>
        </div>
    </div>

    <!-- App Configuration -->
    <script>
        // Base path configurable — changer selon l'environnement de deploiement
        // GitHub Pages: '/posemetre-pro'
        // Local / Capacitor: ''
        window.APP_CONFIG = { basePath: '' };
    </script>

    <script src="i18n.js"></script>
    <script src="theme-switcher.js"></script>
    <script type="module" src="src/main.js"></script>
</body>
</html>
